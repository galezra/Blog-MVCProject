@using System.Globalization
@using Shauli_Blog.Models
@model IEnumerable<Shauli_Blog.Models.Post>

<div id="mainContent">
    <!-- IFormatProvider for post date -->
    @{CultureInfo dateFormatProvider = CultureInfo.CreateSpecificCulture("en-US");}
    
    @foreach (var post in Model)
    {
        <section>
            <article class="blogPost">
                <header>
                    <legend><h2>@post.Title</h2></legend>
                    <p>
                        <small> Posted on <time datetime="@post.PublishDate"> @post.PublishDate.ToString("D", dateFormatProvider) </time> by
                        <a href="@post.Author">@Html.DisplayFor(modelpost => post.Author)</a> -<a href="#comments"> @post.Comments.Count</a> comments <!-- display count comments -->
                        </small></p>
                </header>
                <div id="contentText">
                    <p> @post.Content </p>
                    
                    @if (!string.IsNullOrEmpty(post.Image))
                    {
                        <img src="@post.Image" alt="pic" width="250" height="250" style="margin-top: 10px;"/>
                    }
                    @if (!string.IsNullOrEmpty(post.Video))
                    {
                        <video controls="controls">
                            <source src="@post.Video" type="video/mp4" />
                            Your browser does not support the video tag.
                        </video>
                    }


                </div>
            </article>
        </section>


        <!-- Generate Post Comment form -->
        Comment newComment = new Comment();
        // Get current post's PostId and pass it to _PostComment partial view
        newComment.PostId = post.PostId;
        @Html.Partial("_PostComment", newComment)  

        <!-- Comments section -->
        <h2>Comments</h2>
        <section id="comments">
            <!-- Display each comment in DB which related to this post -->
            @foreach (var comment in post.Comments)
            {
                <hr>
                <div class="media">
                    <a class="pull-left" href="#">
                        <img class="media-object" src="http://placehold.it/64x64" alt="">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">@comment.Title
                            <small>Post by:<a href="@comment.Url">@comment.Author</a></small>
                        </h4>
                        @comment.Content
                    </div>
                </div>
                    }
        </section>

    }
    


</div>


<div class="container">
    <!-- Page header -->
    <div class="page-header">
        <h2>Timeline <small>using Bootstrap's <code>.panel</code>.</small></h2>
    </div>
    <!-- /Page header -->
    <!-- Timeline -->
    <div class="timeline">

        <!-- Line component -->
        <div class="line text-muted"></div>
        <!-- Separator -->
        <div class="separator text-muted">
            <time>26. 3. 2015</time>
        </div>
        <!-- /Separator -->
        <!-- Panel -->
        <article class="panel panel-danger panel-outline">

            <!-- Icon -->
            <div class="panel-heading icon">
                <i class="glyphicon glyphicon-heart"></i>
            </div>
            <!-- /Icon -->
            <!-- Body -->
            <div class="panel-body">
                <strong>Someone</strong> favourited your photo.
            </div>
            <!-- /Body -->

        </article>
        <!-- /Panel -->
        <!-- Panel -->
        <article class="panel panel-default panel-outline">

            <!-- Icon -->
            <div class="panel-heading icon">
                <i class="glyphicon glyphicon-picture"></i>
            </div>
            <!-- /Icon -->
            <!-- Body -->
            <div class="panel-body">
                <img class="img-responsive img-rounded" src="//placehold.it/350x150" />
            </div>
            <!-- /Body -->

        </article>
        <!-- /Panel -->
        <!-- Panel -->
        <article class="panel panel-primary">

            <!-- Icon -->
            <div class="panel-heading icon">
                <i class="glyphicon glyphicon-time"></i>
            </div>
            <!-- /Icon -->
            <!-- Heading -->
            <div class="panel-heading">
                <h100 class="panel-title">New content added</h100>
            </div>
            <!-- /Heading -->
            <!-- Body -->
            <div class="panel-body">
                Some new content has been added.
            </div>
            <!-- /Body -->
            <!-- Footer -->
            <div class="panel-footer">
                <small>Footer is also supported!</small>
            </div>
            <!-- /Footer -->

        </article>
        <!-- /Panel -->
        <!-- Separator -->
        <div class="separator text-muted">
            <time>25. 3. 2015</time>
        </div>
        <!-- /Separator -->
        <!-- Panel -->
        <article class="panel panel-success">

            <!-- Icon -->
            <div class="panel-heading icon">
                <i class="glyphicon glyphicon-plus"></i>
            </div>
            <!-- /Icon -->
            <!-- Heading -->
            <div class="panel-heading">
                <h2 class="panel-title">New content added</h2>
            </div>
            <!-- /Heading -->
            <!-- Body -->
            <div class="panel-body">
                Anything you can do with <code>.panel</code>, can be done in timeline too!
            </div>
            <!-- /Body -->
            <!-- List group -->
            <ul class="list-group">
                <li class="list-group-item">Like</li>
                <li class="list-group-item">list</li>
                <li class="list-group-item">groups</li>
                <li class="list-group-item">and</li>
                <li class="list-group-item">tables</li>
            </ul>

        </article>
        <!-- /Panel -->
        <!-- Panel -->
        <article class="panel panel-info panel-outline">

            <!-- Icon -->
            <div class="panel-heading icon">
                <i class="glyphicon glyphicon-info-sign"></i>
            </div>
            <!-- /Icon -->
            <!-- Body -->
            <div class="panel-body">
                That is all.
            </div>
            <!-- /Body -->

        </article>
        <!-- /Panel -->

    </div>
    <!-- /Timeline -->
</div>
